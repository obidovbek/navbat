{"version":3,"sources":["./src/app/components/queue-officer/queue-officer.module.ts","./src/app/components/queue-officer/queue-officer-routing.module.ts","./src/app/components/queue-officer/queue-officer.component.ts","./src/app/components/queue-officer/queue-officer.component.html"],"names":[],"mappings":"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","file":"components-queue-officer-queue-officer-module-es2015.js","sourcesContent":["import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from '@angular/common';\r\nimport { QueueOfficerRoutingModule } from './queue-officer-routing.module';\r\nimport { QueueOfficerComponent } from './queue-officer.component';\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { Ng2SmartTableModule } from 'ng2-smart-table';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    QueueOfficerComponent,\r\n  ],\r\n  imports: [\r\n    QueueOfficerRoutingModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    CommonModule,\r\n    Ng2SmartTableModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [\r\n  ],\r\n  entryComponents: [\r\n  ]\r\n})\r\nexport class QueueOfficerModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { QueueOfficerComponent } from './queue-officer.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: QueueOfficerComponent,\r\n    data: {\r\n      title: \"Navbat olish\",\r\n      breadcrumb: \"Navbat olish\"\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class QueueOfficerRoutingModule { }\r\n","import { Component, ElementRef, ViewChild } from '@angular/core';\r\nimport { AuthService } from 'src/app/shared/service/auth.service';\r\nimport { HttpService } from 'src/app/shared/service/http.service';\r\nimport { DataService } from 'src/app/shared/service/data.service';\r\nimport { WebsocketService } from 'src/app/shared/service/websocket.service';\r\nimport { Ng2SmartTableModule, LocalDataSource } from 'ng2-smart-table';\r\ninterface tmp {\r\n  loading: boolean;\r\n  emptyPage: boolean;\r\n}\r\n@Component({\r\n  selector: 'app-queue-officer',\r\n  templateUrl: './queue-officer.component.html',\r\n  styleUrls: ['./queue-officer.component.scss'],\r\n})\r\nexport class QueueOfficerComponent {\r\n  @ViewChild('myAudio') audio: ElementRef;\r\n  tmp: tmp = { loading: true, emptyPage: false };\r\n  dataSource: LocalDataSource = new LocalDataSource();\r\n  user_symbol;\r\n  officerSocketStatus = false;\r\n  current_queue = '';\r\n  type_services = [];\r\n  constructor(\r\n    private httpService: HttpService,\r\n    public dataService: DataService,\r\n    public authService: AuthService,\r\n    private socket: WebsocketService\r\n  ) {\r\n    var user = { token: '123d' };\r\n    this.socket.websocket_connection(user);\r\n    this.socket.menu_updated().subscribe((res: any) => {\r\n      console.log('menu_updated', res);\r\n      this.dataService.menu = res.menu;\r\n      this.genTable('load');\r\n    });\r\n    this.socket.next_service_officer().subscribe((next_service: any) => {\r\n      this.dataService.menu = next_service.menu;\r\n      this.genTable('load');\r\n      this.officerSocketStatus = false;\r\n      this.audio.nativeElement.play();\r\n      const { menuIndex, next_number, reception_number, subMenuIndex, symbol } =\r\n        next_service.message;\r\n      this.current_queue =\r\n        next_service.menu[menuIndex].inner_menu[subMenuIndex].uz +\r\n        ' ' +\r\n        symbol +\r\n        (subMenuIndex + 1) +\r\n        '-' +\r\n        next_number;\r\n    });\r\n    // this.authService.user.subscribe((user) => {\r\n    console.log('this.dataService.user', this.dataService.user);\r\n    // const user = this.dataService.user\r\n    this.type_services = this.dataService.user.services;\r\n    this.user_symbol = this.dataService.user.reception_number;\r\n    this.getMenu(0);\r\n    // });\r\n    this.socket.disconnect_officer(() => {\r\n      this.officerSocketStatus = false;\r\n    });\r\n  }\r\n  connectToQueue() {\r\n    this.socket.queue_officer({\r\n      ...this.dataService.user,\r\n      status: !this.officerSocketStatus ? 'waiting' : 'serving',\r\n    });\r\n    this.officerSocketStatus = !this.officerSocketStatus;\r\n  }\r\n  nextItem() {\r\n    this.tmp.loading = true;\r\n    var found = -1;\r\n    var found_title = '';\r\n    for (var i = 0; i < this.type_services.length; i++) {\r\n      if (!this.type_services[i]['tmp_served']) {\r\n        this.type_services[i]['tmp_served'] = true;\r\n        found = i;\r\n        found_title = this.type_services[i].title;\r\n        // alert(i)\r\n        if (i + 1 === this.type_services.length && found >= 0) {\r\n          for (var b = 0; b < this.type_services.length; b++) {\r\n            this.type_services[b]['tmp_served'] = false;\r\n          }\r\n        }\r\n        i = this.type_services.length;\r\n      }\r\n    }\r\n    this.dataService.menu.forEach((menu, idx_m) => {\r\n      menu.inner_menu.forEach((inner_menu, idx_i) => {\r\n        if (found_title === inner_menu.uz) {\r\n          this.nextItemHttpReq(idx_m, idx_i, found);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  nextItemHttpReq(menu_idx, menu_sub_idx, service_title_idx) {\r\n    this.httpService.officerNextItem(menu_idx, menu_sub_idx).subscribe(\r\n      (res: any) => {\r\n        console.log(res);\r\n        if (res.status === 200) {\r\n          this.dataService.menu = res.menu;\r\n          this.socket.queue_next({\r\n            reception_number: this.user_symbol,\r\n            next_number:\r\n              this.dataService.menu[menu_idx].inner_menu[menu_sub_idx].queue\r\n                .current,\r\n            symbol:\r\n              this.dataService.menu[menu_idx].symbol +\r\n              (menu_sub_idx + 1).toString(),\r\n          });\r\n          this.genTable('refresh');\r\n        } else if (res.status === 201) {\r\n          setTimeout(() => {\r\n            this.type_services[service_title_idx]['full_served'] = true;\r\n            console.log(service_title_idx);\r\n            // if(service_title_idx!==0){\r\n            var full_served_found = true;\r\n            this.type_services.forEach((ser, ser_idx) => {\r\n              if (!ser['full_served']) {\r\n                full_served_found = false;\r\n              }\r\n              if (ser_idx + 1 === this.type_services.length) {\r\n                if (full_served_found) {\r\n                  this.tmp.loading = false;\r\n                  alert(\"Navbatda hech kim yo'q!\");\r\n                } else {\r\n                  this.dataService.menu = res.menu;\r\n                  this.nextItem();\r\n                }\r\n              }\r\n            });\r\n            // }else{\r\n            // \tconsole.log(3)\r\n            //  this.dataService.menu = res.menu;\r\n            // \tthis.nextItem();\r\n            // }\r\n          }, 2000);\r\n        } else {\r\n          alert('Nimadur hato ketti yana bir bor urinib ko‘ring! 3');\r\n          // window.location.reload();\r\n        }\r\n      },\r\n      (error) => {\r\n        alert('Bazaka ulana olmadim yana bir bor urinib ko‘ring! 4');\r\n      }\r\n    );\r\n  }\r\n  getMenu(i: number) {\r\n    if (this.dataService.menu) {\r\n      return;\r\n    }\r\n    this.httpService.getMenu().subscribe(\r\n      (menu: any) => {\r\n        // console.log(res);\r\n        // if (res.status === 200) {\r\n        this.dataService.menu = menu;\r\n        this.genTable('load');\r\n        // } else {\r\n        //   alert('Bazaka ulana olmadim yana bir bor urinib ko‘ring! 6');\r\n        //   window.location.reload();\r\n        // }\r\n      },\r\n      async (error) => {\r\n        if (i < 10) {\r\n          setTimeout(() => {\r\n            this.getMenu(i + 1);\r\n          }, 1000);\r\n        } else {\r\n          alert('Bazaka ulana olmadim yana bir bor urinib ko‘ring! 5');\r\n        }\r\n      }\r\n    );\r\n  }\r\n  logout() {\r\n    this.authService.signOut();\r\n    // this.afAuth\r\n    //   .signOut()\r\n    //   .then(() => {\r\n    //     this.router.navigate(['/auth/login']);\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     console.error('Error during logout:', error);\r\n    //   });\r\n  }\r\n  genTable(type) {\r\n    var items = [];\r\n    console.log('this.dataService.menu', this.dataService.menu);\r\n    console.log('this.type_services', this.type_services);\r\n    this.dataService.menu?.forEach((menu) => {\r\n      menu.inner_menu.forEach((inner_menu, idx) => {\r\n        if (this.type_services.find((h) => h.title === inner_menu.uz)) {\r\n          items.push({\r\n            symbol: menu.symbol + (idx + 1),\r\n            context: inner_menu.uz,\r\n            overall: inner_menu.queue.overall,\r\n            current: inner_menu.queue.current,\r\n          });\r\n        }\r\n      });\r\n    });\r\n    console.log('items load', items);\r\n    this.dataSource.load(items);\r\n    if (type === 'refresh') this.dataSource.refresh();\r\n    this.tmp.loading = false;\r\n  }\r\n  public settings = {\r\n    actions: {\r\n      add: false,\r\n      edit: false,\r\n      delete: false,\r\n      position: 'none',\r\n    },\r\n    pager: {\r\n      perPage: 100,\r\n    },\r\n    columns: {\r\n      symbol: {\r\n        title: 'Ramzi',\r\n      },\r\n      current: {\r\n        title: 'Hozirgi',\r\n      },\r\n      overall: {\r\n        title: 'Umumiy',\r\n      },\r\n      context: {\r\n        title: 'Mazmuni',\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction makeid(length) {\r\n  var result = '';\r\n  var characters = '123456789';\r\n  // var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n}\r\n","<!-- Container-fluid starts-->\r\n<div class=\"container-fluid\">\r\n  <div class=\"card\">\r\n    <div class=\"card-header\" *ngIf=\"tmp.emptyPage\">\r\n      <h5>Ma'lumot yo'q</h5>\r\n    </div>\r\n    <div *ngIf=\"!tmp.emptyPage && !tmp.loading\">\r\n      <div\r\n        class=\"card-header\"\r\n        style=\"display: flex; justify-content: space-between\"\r\n      >\r\n        <div><h5>Navbat</h5></div>\r\n        <div (click)=\"logout()\" style=\"cursor: pointer\"><h6>Chiqish</h6></div>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <div style=\"display: flex; justify-content: space-between\">\r\n          <div>\r\n            <h3>Keyingi navbat {{ current_queue ? current_queue : \"\" }}</h3>\r\n          </div>\r\n          <div class=\"btn-popup\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary\"\r\n              (click)=\"connectToQueue()\"\r\n            >\r\n              {{ officerSocketStatus ? \"Bandman\" : \"Qabul\" }}\r\n            </button>\r\n            <!-- <button type=\"button\" class=\"btn btn-primary\" (click)=\"statistics()\">Statistika</button> -->\r\n          </div>\r\n        </div>\r\n\r\n        <!--                 <div class=\"btn-popup pull-right\">\r\n                    <a class=\"btn btn-secondary\" [routerLink]=\"'/products/physical/add-product'\">Mahsulot qo'shish</a>\r\n                </div> -->\r\n        <div\r\n          id=\"batchDelete\"\r\n          class=\"category-table custom-datatable transcation-datatable user-image\"\r\n        >\r\n          <div class=\"table-responsive\">\r\n            <ng2-smart-table\r\n              [settings]=\"settings\"\r\n              [source]=\"dataSource\"\r\n            ></ng2-smart-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<audio #myAudio>\r\n  <source\r\n    src=\"https://navbat.ferpi.uz/assets/ringtones/new_user.ogg\"\r\n    type=\"audio/ogg\"\r\n  />\r\n  <source\r\n    scr=\"https://navbat.ferpi.uz/assets/ringtones/new_user.mp3\"\r\n    type=\"audio/mpeg\"\r\n  />\r\n</audio>\r\n<div class=\"lds-wrap\" *ngIf=\"tmp.loading\">\r\n  <div class=\"lds-dual-ring\"></div>\r\n</div>\r\n<!-- Container-fluid Ends-->\r\n"],"sourceRoot":"webpack:///"}