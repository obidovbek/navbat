{"version":3,"sources":["webpack:///src/app/components/queue-officer/queue-officer.module.ts","webpack:///src/app/components/queue-officer/queue-officer-routing.module.ts","webpack:///src/app/components/queue-officer/queue-officer.component.html","webpack:///src/app/components/queue-officer/queue-officer.component.ts"],"names":["QueueOfficerModule","declarations","imports","providers","bootstrap","entryComponents","routes","path","component","data","title","breadcrumb","QueueOfficerRoutingModule","forChild","exports","QueueOfficerComponent","httpService","dataService","authService","socket","tmp","loading","emptyPage","dataSource","officerSocketStatus","current_queue","type_services","settings","actions","add","edit","position","pager","perPage","columns","symbol","current","overall","context","user","token","websocket_connection","menu_updated","subscribe","res","console","log","menu","genTable","next_service_officer","next_service","audio","nativeElement","play","message","menuIndex","next_number","reception_number","subMenuIndex","inner_menu","uz","services","user_symbol","getMenu","disconnect_officer","queue_officer","status","found","found_title","i","length","b","forEach","idx_m","idx_i","nextItemHttpReq","menu_idx","menu_sub_idx","service_title_idx","officerNextItem","queue_next","queue","toString","setTimeout","full_served_found","ser","ser_idx","alert","nextItem","error","signOut","type","items","idx","find","h","push","load","refresh","selector","templateUrl","styleUrls","makeid","result","characters","charactersLength","charAt","Math","floor","random"],"mappings":"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","file":"components-queue-officer-queue-officer-module-es5.js","sourcesContent":["import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from '@angular/common';\r\nimport { QueueOfficerRoutingModule } from './queue-officer-routing.module';\r\nimport { QueueOfficerComponent } from './queue-officer.component';\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { Ng2SmartTableModule } from 'ng2-smart-table';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    QueueOfficerComponent,\r\n  ],\r\n  imports: [\r\n    QueueOfficerRoutingModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    CommonModule,\r\n    Ng2SmartTableModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [\r\n  ],\r\n  entryComponents: [\r\n  ]\r\n})\r\nexport class QueueOfficerModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { QueueOfficerComponent } from './queue-officer.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: QueueOfficerComponent,\r\n    data: {\r\n      title: \"Navbat olish\",\r\n      breadcrumb: \"Navbat olish\"\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class QueueOfficerRoutingModule { }\r\n","<!-- Container-fluid starts-->\r\n<div class=\"container-fluid\">\r\n  <div class=\"card\">\r\n    <div class=\"card-header\" *ngIf=\"tmp.emptyPage\">\r\n      <h5>Ma'lumot yo'q</h5>\r\n    </div>\r\n    <div *ngIf=\"!tmp.emptyPage && !tmp.loading\">\r\n      <div\r\n        class=\"card-header\"\r\n        style=\"display: flex; justify-content: space-between\"\r\n      >\r\n        <div><h5>Navbat</h5></div>\r\n        <div (click)=\"logout()\" style=\"cursor: pointer\"><h6>Chiqish</h6></div>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <div style=\"display: flex; justify-content: space-between\">\r\n          <div>\r\n            <h3>Keyingi navbat {{ current_queue ? current_queue : \"\" }}</h3>\r\n          </div>\r\n          <div class=\"btn-popup\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary\"\r\n              (click)=\"connectToQueue()\"\r\n            >\r\n              {{ officerSocketStatus ? \"Bandman\" : \"Qabul\" }}\r\n            </button>\r\n            <!-- <button type=\"button\" class=\"btn btn-primary\" (click)=\"statistics()\">Statistika</button> -->\r\n          </div>\r\n        </div>\r\n\r\n        <!--                 <div class=\"btn-popup pull-right\">\r\n                    <a class=\"btn btn-secondary\" [routerLink]=\"'/products/physical/add-product'\">Mahsulot qo'shish</a>\r\n                </div> -->\r\n        <div\r\n          id=\"batchDelete\"\r\n          class=\"category-table custom-datatable transcation-datatable user-image\"\r\n        >\r\n          <div class=\"table-responsive\">\r\n            <ng2-smart-table\r\n              [settings]=\"settings\"\r\n              [source]=\"dataSource\"\r\n            ></ng2-smart-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<audio #myAudio>\r\n  <source\r\n    src=\"https://navbat.ferpi.uz/assets/ringtones/new_user.ogg\"\r\n    type=\"audio/ogg\"\r\n  />\r\n  <source\r\n    scr=\"https://navbat.ferpi.uz/assets/ringtones/new_user.mp3\"\r\n    type=\"audio/mpeg\"\r\n  />\r\n</audio>\r\n<div class=\"lds-wrap\" *ngIf=\"tmp.loading\">\r\n  <div class=\"lds-dual-ring\"></div>\r\n</div>\r\n<!-- Container-fluid Ends-->\r\n","import { Component, ElementRef, ViewChild } from '@angular/core';\r\nimport { AuthService } from 'src/app/shared/service/auth.service';\r\nimport { HttpService } from 'src/app/shared/service/http.service';\r\nimport { DataService } from 'src/app/shared/service/data.service';\r\nimport { WebsocketService } from 'src/app/shared/service/websocket.service';\r\nimport { Ng2SmartTableModule, LocalDataSource } from 'ng2-smart-table';\r\ninterface tmp {\r\n  loading: boolean;\r\n  emptyPage: boolean;\r\n}\r\n@Component({\r\n  selector: 'app-queue-officer',\r\n  templateUrl: './queue-officer.component.html',\r\n  styleUrls: ['./queue-officer.component.scss'],\r\n})\r\nexport class QueueOfficerComponent {\r\n  @ViewChild('myAudio') audio: ElementRef;\r\n  tmp: tmp = { loading: true, emptyPage: false };\r\n  dataSource: LocalDataSource = new LocalDataSource();\r\n  user_symbol;\r\n  officerSocketStatus = false;\r\n  current_queue = '';\r\n  type_services = [];\r\n  constructor(\r\n    private httpService: HttpService,\r\n    public dataService: DataService,\r\n    public authService: AuthService,\r\n    private socket: WebsocketService\r\n  ) {\r\n    var user = { token: '123d' };\r\n    this.socket.websocket_connection(user);\r\n    this.socket.menu_updated().subscribe((res: any) => {\r\n      console.log('menu_updated', res);\r\n      this.dataService.menu = res.menu;\r\n      this.genTable('load');\r\n    });\r\n    this.socket.next_service_officer().subscribe((next_service: any) => {\r\n      this.dataService.menu = next_service.menu;\r\n      this.genTable('load');\r\n      this.officerSocketStatus = false;\r\n      this.audio.nativeElement.play();\r\n      const { menuIndex, next_number, reception_number, subMenuIndex, symbol } =\r\n        next_service.message;\r\n      this.current_queue =\r\n        next_service.menu[menuIndex].inner_menu[subMenuIndex].uz +\r\n        ' ' +\r\n        symbol +\r\n        (subMenuIndex + 1) +\r\n        '-' +\r\n        next_number;\r\n    });\r\n    // this.authService.user.subscribe((user) => {\r\n    console.log('this.dataService.user', this.dataService.user);\r\n    // const user = this.dataService.user\r\n    this.type_services = this.dataService.user.services;\r\n    this.user_symbol = this.dataService.user.reception_number;\r\n    this.getMenu(0);\r\n    // });\r\n    this.socket.disconnect_officer(() => {\r\n      this.officerSocketStatus = false;\r\n    });\r\n  }\r\n  connectToQueue() {\r\n    this.socket.queue_officer({\r\n      ...this.dataService.user,\r\n      status: !this.officerSocketStatus ? 'waiting' : 'serving',\r\n    });\r\n    this.officerSocketStatus = !this.officerSocketStatus;\r\n  }\r\n  nextItem() {\r\n    this.tmp.loading = true;\r\n    var found = -1;\r\n    var found_title = '';\r\n    for (var i = 0; i < this.type_services.length; i++) {\r\n      if (!this.type_services[i]['tmp_served']) {\r\n        this.type_services[i]['tmp_served'] = true;\r\n        found = i;\r\n        found_title = this.type_services[i].title;\r\n        // alert(i)\r\n        if (i + 1 === this.type_services.length && found >= 0) {\r\n          for (var b = 0; b < this.type_services.length; b++) {\r\n            this.type_services[b]['tmp_served'] = false;\r\n          }\r\n        }\r\n        i = this.type_services.length;\r\n      }\r\n    }\r\n    this.dataService.menu.forEach((menu, idx_m) => {\r\n      menu.inner_menu.forEach((inner_menu, idx_i) => {\r\n        if (found_title === inner_menu.uz) {\r\n          this.nextItemHttpReq(idx_m, idx_i, found);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  nextItemHttpReq(menu_idx, menu_sub_idx, service_title_idx) {\r\n    this.httpService.officerNextItem(menu_idx, menu_sub_idx).subscribe(\r\n      (res: any) => {\r\n        console.log(res);\r\n        if (res.status === 200) {\r\n          this.dataService.menu = res.menu;\r\n          this.socket.queue_next({\r\n            reception_number: this.user_symbol,\r\n            next_number:\r\n              this.dataService.menu[menu_idx].inner_menu[menu_sub_idx].queue\r\n                .current,\r\n            symbol:\r\n              this.dataService.menu[menu_idx].symbol +\r\n              (menu_sub_idx + 1).toString(),\r\n          });\r\n          this.genTable('refresh');\r\n        } else if (res.status === 201) {\r\n          setTimeout(() => {\r\n            this.type_services[service_title_idx]['full_served'] = true;\r\n            console.log(service_title_idx);\r\n            // if(service_title_idx!==0){\r\n            var full_served_found = true;\r\n            this.type_services.forEach((ser, ser_idx) => {\r\n              if (!ser['full_served']) {\r\n                full_served_found = false;\r\n              }\r\n              if (ser_idx + 1 === this.type_services.length) {\r\n                if (full_served_found) {\r\n                  this.tmp.loading = false;\r\n                  alert(\"Navbatda hech kim yo'q!\");\r\n                } else {\r\n                  this.dataService.menu = res.menu;\r\n                  this.nextItem();\r\n                }\r\n              }\r\n            });\r\n            // }else{\r\n            // \tconsole.log(3)\r\n            //  this.dataService.menu = res.menu;\r\n            // \tthis.nextItem();\r\n            // }\r\n          }, 2000);\r\n        } else {\r\n          alert('Nimadur hato ketti yana bir bor urinib ko‘ring! 3');\r\n          // window.location.reload();\r\n        }\r\n      },\r\n      (error) => {\r\n        alert('Bazaka ulana olmadim yana bir bor urinib ko‘ring! 4');\r\n      }\r\n    );\r\n  }\r\n  getMenu(i: number) {\r\n    if (this.dataService.menu) {\r\n      return;\r\n    }\r\n    this.httpService.getMenu().subscribe(\r\n      (menu: any) => {\r\n        // console.log(res);\r\n        // if (res.status === 200) {\r\n        this.dataService.menu = menu;\r\n        this.genTable('load');\r\n        // } else {\r\n        //   alert('Bazaka ulana olmadim yana bir bor urinib ko‘ring! 6');\r\n        //   window.location.reload();\r\n        // }\r\n      },\r\n      async (error) => {\r\n        if (i < 10) {\r\n          setTimeout(() => {\r\n            this.getMenu(i + 1);\r\n          }, 1000);\r\n        } else {\r\n          alert('Bazaka ulana olmadim yana bir bor urinib ko‘ring! 5');\r\n        }\r\n      }\r\n    );\r\n  }\r\n  logout() {\r\n    this.authService.signOut();\r\n    // this.afAuth\r\n    //   .signOut()\r\n    //   .then(() => {\r\n    //     this.router.navigate(['/auth/login']);\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     console.error('Error during logout:', error);\r\n    //   });\r\n  }\r\n  genTable(type) {\r\n    var items = [];\r\n    console.log('this.dataService.menu', this.dataService.menu);\r\n    console.log('this.type_services', this.type_services);\r\n    this.dataService.menu?.forEach((menu) => {\r\n      menu.inner_menu.forEach((inner_menu, idx) => {\r\n        if (this.type_services.find((h) => h.title === inner_menu.uz)) {\r\n          items.push({\r\n            symbol: menu.symbol + (idx + 1),\r\n            context: inner_menu.uz,\r\n            overall: inner_menu.queue.overall,\r\n            current: inner_menu.queue.current,\r\n          });\r\n        }\r\n      });\r\n    });\r\n    console.log('items load', items);\r\n    this.dataSource.load(items);\r\n    if (type === 'refresh') this.dataSource.refresh();\r\n    this.tmp.loading = false;\r\n  }\r\n  public settings = {\r\n    actions: {\r\n      add: false,\r\n      edit: false,\r\n      delete: false,\r\n      position: 'none',\r\n    },\r\n    pager: {\r\n      perPage: 100,\r\n    },\r\n    columns: {\r\n      symbol: {\r\n        title: 'Ramzi',\r\n      },\r\n      current: {\r\n        title: 'Hozirgi',\r\n      },\r\n      overall: {\r\n        title: 'Umumiy',\r\n      },\r\n      context: {\r\n        title: 'Mazmuni',\r\n      },\r\n    },\r\n  };\r\n}\r\nfunction makeid(length) {\r\n  var result = '';\r\n  var characters = '123456789';\r\n  // var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n}\r\n"]}