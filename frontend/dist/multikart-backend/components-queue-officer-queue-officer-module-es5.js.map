{"version":3,"sources":["webpack:///src/app/components/queue-officer/queue-officer.module.ts","webpack:///src/app/components/queue-officer/queue-officer-routing.module.ts","webpack:///src/app/components/queue-officer/queue-officer.component.html","webpack:///src/app/components/queue-officer/queue-officer.component.ts"],"names":["QueueOfficerModule","declarations","imports","providers","bootstrap","entryComponents","routes","path","component","data","title","breadcrumb","QueueOfficerRoutingModule","forChild","exports","QueueOfficerComponent","httpService","dataService","authService","socket","tmp","loading","emptyPage","dataSource","type_services","settings","actions","add","edit","position","pager","perPage","columns","symbol","current","overall","context","user","token","websocket_connection","subscribe","console","log","services","user_symbol","officer_id","getMenu","found","found_title","i","length","b","menu","forEach","idx_m","inner_menu","idx_i","uz","nextItemHttpReq","menu_idx","menu_sub_idx","service_title_idx","officerNextItem","res","status","queue_next","next_number","queue","toString","genTable","setTimeout","full_served_found","ser","ser_idx","alert","nextItem","error","window","location","reload","type","items","idx","find","h","push","load","refresh","selector","templateUrl","styleUrls","makeid","result","characters","charactersLength","charAt","Math","floor","random"],"mappings":"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","file":"components-queue-officer-queue-officer-module-es5.js","sourcesContent":["import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from '@angular/common';\r\nimport { QueueOfficerRoutingModule } from './queue-officer-routing.module';\r\nimport { QueueOfficerComponent } from './queue-officer.component';\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { Ng2SmartTableModule } from 'ng2-smart-table';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    QueueOfficerComponent,\r\n  ],\r\n  imports: [\r\n    QueueOfficerRoutingModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    CommonModule,\r\n    Ng2SmartTableModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [\r\n  ],\r\n  entryComponents: [\r\n  ]\r\n})\r\nexport class QueueOfficerModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { QueueOfficerComponent } from './queue-officer.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: QueueOfficerComponent,\r\n    data: {\r\n      title: \"Navbat olish\",\r\n      breadcrumb: \"Navbat olish\"\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class QueueOfficerRoutingModule { }\r\n","<!-- Container-fluid starts-->\r\n<div class=\"container-fluid\">\r\n    <div class=\"card\">\r\n        <div class=\"card-header\" *ngIf=\"tmp.emptyPage\">\r\n            <h5>\r\n              Ma'lumot yo'q\r\n            </h5>\r\n        </div>\r\n        <div *ngIf=\"!tmp.emptyPage && !tmp.loading\">\r\n            <div class=\"card-header\">\r\n                <h5>Navbat</h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <div class=\"btn-popup pull-right\">\r\n                    <button type=\"button\" class=\"btn btn-primary\" (click)=\"nextItem()\">Kiyingi</button>\r\n                    <!-- <button type=\"button\" class=\"btn btn-primary\" (click)=\"statistics()\">Statistika</button> -->\r\n                </div>\r\n<!--                 <div class=\"btn-popup pull-right\">\r\n                    <a class=\"btn btn-secondary\" [routerLink]=\"'/products/physical/add-product'\">Mahsulot qo'shish</a>\r\n                </div> -->\r\n                <div id=\"batchDelete\" class=\"category-table custom-datatable transcation-datatable user-image\">\r\n                    <div class=\"table-responsive\">\r\n                        <ng2-smart-table \r\n                            [settings]=\"settings\" \r\n                            [source]=\"dataSource\"\r\n                        ></ng2-smart-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"lds-wrap\" *ngIf=\"tmp.loading\">\r\n    <div class=\"lds-dual-ring\"></div>\r\n</div>\r\n<!-- Container-fluid Ends-->","import { Component, ViewChild } from \"@angular/core\";\r\nimport { AuthService } from 'src/app/shared/service/auth.service';\r\nimport { HttpService } from 'src/app/shared/service/http.service';\r\nimport { DataService } from 'src/app/shared/service/data.service';\r\nimport { WebsocketService } from 'src/app/shared/service/websocket.service';\r\nimport { Router } from '@angular/router'\r\nimport { Ng2SmartTableModule, LocalDataSource } from 'ng2-smart-table';\r\n\r\ninterface tmp{\r\n  loading: boolean;\r\n  emptyPage: boolean;\r\n}\r\n@Component({\r\n  selector: 'app-queue-officer',\r\n  templateUrl: './queue-officer.component.html',\r\n  styleUrls: ['./queue-officer.component.scss'],\r\n})\r\n\r\nexport class QueueOfficerComponent {\r\n    tmp: tmp = {loading: true, emptyPage: false};\r\n  \tdataSource: LocalDataSource = new LocalDataSource();\r\n\tuser_symbol;\r\n\ttype_services = []\r\n\tconstructor(\r\n\t\tprivate httpService: HttpService,\r\n\t  \tpublic dataService: DataService,\r\n\t  \tpublic authService: AuthService,\r\n\t  \tprivate socket: WebsocketService\r\n  \t){\r\n  \t\tvar user = {token: '123d'}\r\n        this.socket.websocket_connection(user);\r\n\t    this.authService.user.subscribe(user=>{\r\n\t    \tconsole.log('user', user)\r\n\t    \tthis.type_services = user.services;\r\n\t    \tthis.user_symbol = user.officer_id;\r\n\t\t    this.getMenu(0);\r\n\t    })\r\n\t}\r\n\tnextItem(){\r\n\t\tthis.tmp.loading = true;\r\n\t\tvar found = -1;\r\n\t\tvar found_title = '';\r\n\t\tfor(var i=0;i<this.type_services.length;i++){\r\n\t\t\tif(!this.type_services[i]['tmp_served']){\r\n\t\t\t\tthis.type_services[i]['tmp_served'] = true;\r\n\t\t\t\tfound = i;\r\n\t\t\t\tfound_title = this.type_services[i].title;\r\n\t\t\t\t// alert(i)\r\n\t\t\t\tif(((i+1)===this.type_services.length)&&found>=0){\r\n\t\t\t\t\tfor(var b=0;b<this.type_services.length;b++){\r\n\t\t\t\t\t\tthis.type_services[b]['tmp_served'] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ti = this.type_services.length;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.dataService.menu\r\n    \t.forEach((menu, idx_m)=>{\r\n    \t\tmenu.inner_menu.forEach((inner_menu, idx_i)=>{\r\n    \t\t\tif(found_title===inner_menu.uz){\r\n    \t\t\t\tthis.nextItemHttpReq(idx_m, idx_i, found);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t});\r\n\t}\r\n\tnextItemHttpReq(menu_idx, menu_sub_idx, service_title_idx){\r\n\t\tthis.httpService.officerNextItem(menu_idx, menu_sub_idx)\r\n\t\t.subscribe((res:any)=>{\r\n\t\t\tconsole.log(res);\r\n\t        if(res.status===200){\r\n\t          this.dataService.menu = res.menu;\r\n\t          this.socket.queue_next(\r\n\t          \t{\r\n\t          \t\tofficer_id: this.user_symbol, \r\n\t          \t\tnext_number: (this.dataService.menu[menu_idx].inner_menu[menu_sub_idx].queue.current),\r\n\t          \t\tsymbol: (this.dataService.menu[menu_idx].symbol + (menu_sub_idx+1).toString())\r\n\t          \t}\r\n\t           );\r\n\t          this.genTable('refresh');\r\n\t        }else if(res.status===201){\r\n\t        \tsetTimeout(()=>{\r\n\t\t        \t\tthis.type_services[service_title_idx]['full_served'] = true;\r\n\t        \t\t\tconsole.log(service_title_idx)\r\n\t        \t\t// if(service_title_idx!==0){\r\n\t        \t\t\tvar full_served_found = true;\r\n\t        \t\t\tthis.type_services.forEach((ser, ser_idx)=>{\r\n\t        \t\t\t\tif(!ser['full_served']){\r\n\t        \t\t\t\t\tfull_served_found = false;\r\n\t        \t\t\t\t}\r\n\t        \t\t\t\tif((ser_idx+1)===this.type_services.length){\r\n\t        \t\t\t\t\tif(full_served_found){\r\n\t\t\t        \t\t\t\tthis.tmp.loading = false;\r\n\t\t\t        \t\t\t\talert('Navbatda hech kim yo\\'q!')\r\n\t        \t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t        this.dataService.menu = res.menu;\r\n\t\t\t\t\t        \t\tthis.nextItem();\r\n\t        \t\t\t\t\t}\r\n\t        \t\t\t\t}\r\n\t        \t\t\t});\t\r\n\t        \t\t// }else{\r\n\t        \t\t// \tconsole.log(3)\r\n\t\t\t\t       //  this.dataService.menu = res.menu;\r\n\t\t        \t// \tthis.nextItem();\r\n\t        \t\t// }\r\n\t        \t},2000);\r\n\t        }else{\r\n\t          alert(\"Nimadur hato ketti yana bir bor urinib ko‘ring!\");\r\n\t          // window.location.reload();\r\n\t        }\r\n\t\t},error=>{\r\n\t        alert(\"Bazaka ulana olmadim yana bir bor urinib ko‘ring!\");\r\n\t\t})\r\n\t}\r\n\tgetMenu(i:number){\r\n\t    if(this.dataService.menu){return;};\r\n\t    this.httpService.getMenu()\r\n\t    .subscribe((res:any)=>{\r\n\t          console.log(res);\r\n\t        if(res.status===200){\r\n\t          this.dataService.menu = res.menu;\r\n\t          this.genTable('load');\r\n\t        }else{\r\n\t          alert(\"Bazaka ulana olmadim yana bir bor urinib ko‘ring!\");\r\n\t          window.location.reload();\r\n\t        }\r\n\t    },async (error)=>{\r\n\t      if(i<10){\r\n\t        setTimeout(()=>{this.getMenu(i+1)},1000);\r\n\t      }else{\r\n\t          alert(\"Bazaka ulana olmadim yana bir bor urinib ko‘ring!\");\r\n\t      }\r\n\t    });\r\n    }\r\n    genTable(type){\r\n    \tvar items = [];\r\n    \tthis.dataService.menu\r\n    \t.forEach(menu=>{\r\n    \t\tmenu.inner_menu.forEach((inner_menu, idx)=>{\r\n    \t\t\tif(this.type_services.find(h=>h.title===inner_menu.uz)){\r\n\t    \t\t\titems.push({symbol: menu.symbol + (idx+1), context: inner_menu.uz, overall: inner_menu.queue.overall, current: inner_menu.queue.current})\r\n    \t\t\t}\r\n    \t\t});\r\n    \t});\r\n    \tthis.dataSource.load(items);\r\n    \tif(type==='refresh')this.dataSource.refresh();\r\n    \tthis.tmp.loading = false;\r\n    }\r\n\tpublic settings = {\r\n\t    actions: {\r\n\t      add: false,\r\n\t      edit: false,\r\n\t      delete: false,\r\n\t      position: 'none'\r\n\t    },\r\n\t    pager: {\r\n\t\t    perPage: 100\r\n\t    },\r\n\t    columns: {\r\n\t      symbol: {\r\n\t        title: 'Ramzi',\r\n\t      },\r\n\t      current: {\r\n\t      \ttitle: \"Hozirgi\"\r\n\t      },\r\n\t      overall: {\r\n\t      \ttitle: \"Umumiy\"\r\n\t      },\r\n\t      context: {\r\n\t        title: 'Mazmuni',\r\n\t      },\r\n\t    },\r\n\t};\r\n}\r\nfunction makeid(length) {\r\n    var result           = '';\r\n    var characters       = '123456789';\r\n    // var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var charactersLength = characters.length;\r\n    for ( var i = 0; i < length; i++ ) {\r\n      result += characters.charAt(Math.floor(Math.random() * \r\n charactersLength));\r\n   }\r\n   return result;\r\n}"]}